<!DOCTYPE html>
<h2>Flashcards</h2>
<div class='flashcard' onclick='toggleFlash()'>${content}</div>
<button onclick='nextFlash()'>次へ</button>
`);
}
function toggleFlash(){ showBack = !showBack; showFlash(); }
function nextFlash(){ index = (index+1)%words.length; showBack=false; showFlash(); }


// Quiz
let quizIndex = 0;
let score = 0;
function quizMode(){
mode = "quiz";
quizIndex = 0;
score = 0;
nextQuiz();
}
function nextQuiz(){
if(quizIndex >= words.length){ return quizResult(); }
const q = words[quizIndex];
const options = shuffle([q.meaning, ...getRandomMeanings(q.meaning,3)]);
setView(`
<h2>Quiz ${quizIndex+1}/${words.length}</h2>
<h3>${q.word}</h3>
${options.map(o=>`<div class='quiz-option' onclick='selectQuiz("${o}")'>${o}</div>`).join("")}
`);
}
function selectQuiz(opt){
if(opt === words[quizIndex].meaning) score++;
quizIndex++;
nextQuiz();
}
function quizResult(){
setView(`
<h2>結果</h2>
<p>${score} / ${words.length}</p>
<button onclick='modeSelect()'>戻る</button>
`);
}


function shuffle(arr){ return arr.sort(()=>Math.random()-0.5); }
function getRandomMeanings(correct, count){
const arr = words.filter(w=>w.meaning!==correct).map(w=>w.meaning);
return shuffle(arr).slice(0,count);
}


home();
</script>
</body>
</html>
